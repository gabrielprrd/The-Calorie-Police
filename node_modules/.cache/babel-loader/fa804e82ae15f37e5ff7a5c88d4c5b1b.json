{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Gabriel\\\\Desktop\\\\web-development\\\\the-calorie-police\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Gabriel\\\\Desktop\\\\web-development\\\\the-calorie-police\\\\src\\\\components\\\\DietSearcher\\\\DietSearcher.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { INITIAL_FOODLIST, apiKey } from '../../store';\nimport axios from 'axios';\nimport DietForm from './DietForm';\nimport DietResults from './DietResults';\nimport UserRecipes from './UserRecipes';\nexport class DietSearcher extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = INITIAL_FOODLIST;\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const query = this.state.query;\n      const endpoint = \"https://api.spoonacular.com/recipes/search?query=\".concat(query, \"&number=4&apiKey=\").concat(apiKey);\n      axios.get(endpoint).then(res => {\n        const food = res.data.results;\n        this.setState(prevState => ({\n          food,\n          isFoodShown: true\n        }));\n      });\n    };\n\n    this.seeMoreInfo = id => {\n      axios.get(\" https://api.spoonacular.com/recipes/\".concat(id, \"/information?includeNutrition=true&apiKey=\").concat(apiKey)).then(res => {\n        const recipeid = res.data.id;\n        const result = res.data.nutrition.nutrients.map(nutrient => {\n          return {\n            title: nutrient.title,\n            amount: nutrient.amount\n          };\n        });\n        this.setState(prevState => ({\n          moreInfoRecipe: _objectSpread({}, prevState.moreInfoRecipe, {\n            moreInfoResult: result,\n            recipeid,\n            isMoreInfoShown: true\n          })\n        }));\n        console.log(this.state);\n      });\n    };\n\n    this.saveRecipe = () => {\n      const newRecipe = this.state.food.filter(food => {\n        return food.id === this.state.moreInfoRecipe.recipeid;\n      });\n      const newRecipeFullInfo = [newRecipe.push(...this.state.moreInfoRecipe.moreInfoResult)];\n      let recipesArray = [...this.state.savedRecipes, newRecipeFullInfo];\n      this.setState({\n        savedRecipes: recipesArray,\n        isSavedRecipeShown: true\n      }, () => {\n        console.log(this.state);\n      });\n\n      if (typeof Storage !== \"undefined\") {\n        localStorage.setItem('@calorie-police/userRecipes', JSON.stringify(this.state.savedRecipes));\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Search and add the recipe you want to your diet and we will tell you if it fits your daily caloric need!\"), React.createElement(DietForm, {\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), this.state.isFoodShown && React.createElement(DietResults, {\n      food: this.state.food,\n      seeMoreInfo: this.seeMoreInfo,\n      moreInfoRecipe: this.state.moreInfoRecipe,\n      saveRecipe: this.saveRecipe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(UserRecipes, {\n      savedRecipes: this.state.savedRecipes,\n      isSavedRecipeShown: this.state.isSavedRecipeShown,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }));\n  }\n\n}\nexport default DietSearcher;","map":{"version":3,"sources":["C:\\Users\\Gabriel\\Desktop\\web-development\\the-calorie-police\\src\\components\\DietSearcher\\DietSearcher.js"],"names":["React","Component","INITIAL_FOODLIST","apiKey","axios","DietForm","DietResults","UserRecipes","DietSearcher","state","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","query","endpoint","get","then","res","food","data","results","prevState","isFoodShown","seeMoreInfo","id","recipeid","result","nutrition","nutrients","map","nutrient","title","amount","moreInfoRecipe","moreInfoResult","isMoreInfoShown","console","log","saveRecipe","newRecipe","filter","newRecipeFullInfo","push","recipesArray","savedRecipes","isSavedRecipeShown","Storage","localStorage","setItem","JSON","stringify","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { INITIAL_FOODLIST, apiKey } from '../../store'\r\nimport axios from 'axios'\r\nimport DietForm from './DietForm'\r\nimport DietResults from './DietResults'\r\nimport UserRecipes from './UserRecipes'\r\n\r\nexport class DietSearcher extends Component {\r\n\r\n    state = INITIAL_FOODLIST\r\n\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const query = this.state.query\r\n        const endpoint = `https://api.spoonacular.com/recipes/search?query=${query}&number=4&apiKey=${apiKey}`\r\n        axios.get(endpoint)\r\n            .then(res => {\r\n                const food = res.data.results\r\n                this.setState(prevState => ({\r\n                    food,\r\n                    isFoodShown: true\r\n                }))\r\n            })\r\n    }\r\n\r\n    seeMoreInfo = (id) => {\r\n        axios.get(` https://api.spoonacular.com/recipes/${id}/information?includeNutrition=true&apiKey=${apiKey}`)\r\n            .then(res => {\r\n                const recipeid = res.data.id \r\n                const result = res.data.nutrition.nutrients.map(nutrient => {\r\n                   return {\r\n                    title: nutrient.title,\r\n                    amount: nutrient.amount\r\n                   }\r\n                })\r\n                this.setState(prevState => ({\r\n                    moreInfoRecipe: {\r\n                        ...prevState.moreInfoRecipe,\r\n                        moreInfoResult: result,\r\n                        recipeid,\r\n                        isMoreInfoShown: true\r\n                    }\r\n                }))\r\n                console.log(this.state)\r\n            })\r\n    }\r\n\r\n    saveRecipe = () => {\r\n        const newRecipe = this.state.food.filter(food => {\r\n            return (food.id === this.state.moreInfoRecipe.recipeid)  \r\n        })\r\n        const newRecipeFullInfo = [newRecipe.push( ...this.state.moreInfoRecipe.moreInfoResult)]\r\n        let recipesArray = [...this.state.savedRecipes, newRecipeFullInfo];\r\n        \r\n        this.setState({\r\n            savedRecipes: recipesArray,\r\n            isSavedRecipeShown: true\r\n        },\r\n            () => { console.log(this.state) }\r\n        )\r\n\r\n        if (typeof(Storage) !== \"undefined\") {\r\n            localStorage.setItem('@calorie-police/userRecipes', JSON.stringify(this.state.savedRecipes));\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h3>Search and add the recipe you want to your diet and we will tell you if it fits your daily caloric need!</h3>\r\n                <DietForm handleChange={this.handleChange} handleSubmit={this.handleSubmit} />\r\n                \r\n                { this.state.isFoodShown && \r\n                <DietResults food={this.state.food}\r\n                seeMoreInfo={this.seeMoreInfo}\r\n                moreInfoRecipe={this.state.moreInfoRecipe}\r\n                saveRecipe={this.saveRecipe} /> }  \r\n\r\n                <UserRecipes savedRecipes={this.state.savedRecipes} isSavedRecipeShown={this.state.isSavedRecipeShown} />         \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DietSearcher\r\n"]},"metadata":{},"sourceType":"module"}