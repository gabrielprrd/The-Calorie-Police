{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Gabriel\\\\Desktop\\\\web-development\\\\the-calorie-police\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Gabriel\\\\Desktop\\\\web-development\\\\the-calorie-police\\\\src\\\\components\\\\DietSearcher\\\\DietSearcher.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { INITIAL_FOODLIST, apiKey } from '../../store';\nimport axios from 'axios';\nimport DietForm from './DietForm';\nimport DietResults from './DietResults';\nexport class DietSearcher extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = INITIAL_FOODLIST;\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const query = this.state.query;\n      const endpoint = \"https://api.spoonacular.com/recipes/search?query=\".concat(query, \"&number=4&apiKey=\").concat(apiKey);\n      axios.get(endpoint).then(res => {\n        const food = res.data.results;\n        this.setState(prevState => ({\n          food,\n          isFoodShown: true\n        }));\n      });\n    };\n\n    this.seeMoreInfo = id => {\n      axios.get(\" https://api.spoonacular.com/recipes/\".concat(id, \"/information?includeNutrition=true&apiKey=\").concat(apiKey)).then(res => {\n        const recipeid = res.data.id;\n        const result = res.data.nutrition.nutrients.map(nutrient => {\n          return {\n            title: nutrient.title,\n            amount: nutrient.amount\n          };\n        });\n        this.setState(prevState => ({\n          moreInfoRecipe: _objectSpread({}, prevState.moreInfoRecipe, {\n            moreInfoResult: result,\n            recipeid: recipeid,\n            isMoreInfoShown: true\n          })\n        }));\n        console.log(this.state);\n      });\n    };\n\n    this.saveRecipe = id => {\n      if (this.state.mealid === this.state.recipeid) {\n        const recipeInfo = this.state.moreInfoResult;\n        this.setState({\n          savedRecipes: recipeInfo\n        });\n      }\n\n      if (typeof Storage !== \"undefined\") {\n        localStorage.setItem('@calorie-police/userRecipes', JSON.stringify(this.state.savedRecipes));\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Search and add the recipe you want and we will tell you if it fits your daily caloric need\"), React.createElement(DietForm, {\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), this.state.isFoodShown && React.createElement(DietResults, {\n      food: this.state.food,\n      seeMoreInfo: this.seeMoreInfo,\n      moreInfoRecipe: this.state.moreInfoRecipe,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }));\n  }\n\n}\nexport default DietSearcher;","map":{"version":3,"sources":["C:\\Users\\Gabriel\\Desktop\\web-development\\the-calorie-police\\src\\components\\DietSearcher\\DietSearcher.js"],"names":["React","Component","INITIAL_FOODLIST","apiKey","axios","DietForm","DietResults","DietSearcher","state","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","query","endpoint","get","then","res","food","data","results","prevState","isFoodShown","seeMoreInfo","id","recipeid","result","nutrition","nutrients","map","nutrient","title","amount","moreInfoRecipe","moreInfoResult","isMoreInfoShown","console","log","saveRecipe","mealid","recipeInfo","savedRecipes","Storage","localStorage","setItem","JSON","stringify","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { INITIAL_FOODLIST, apiKey } from '../../store'\r\nimport axios from 'axios'\r\nimport DietForm from './DietForm'\r\nimport DietResults from './DietResults'\r\n\r\nexport class DietSearcher extends Component {\r\n\r\n    state = INITIAL_FOODLIST\r\n\r\n    handleChange = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const query = this.state.query\r\n        const endpoint = `https://api.spoonacular.com/recipes/search?query=${query}&number=4&apiKey=${apiKey}`\r\n        axios.get(endpoint)\r\n            .then(res => {\r\n                const food = res.data.results\r\n                this.setState(prevState => ({\r\n                    food,\r\n                    isFoodShown: true\r\n                }))\r\n            })\r\n    }\r\n\r\n    seeMoreInfo = (id) => {\r\n        axios.get(` https://api.spoonacular.com/recipes/${id}/information?includeNutrition=true&apiKey=${apiKey}`)\r\n            .then(res => {\r\n                const recipeid = res.data.id \r\n                const result = res.data.nutrition.nutrients.map(nutrient => {\r\n                   return {\r\n                    title: nutrient.title,\r\n                    amount: nutrient.amount\r\n                   }\r\n                })\r\n                this.setState(prevState => ({\r\n                    moreInfoRecipe: {\r\n                        ...prevState.moreInfoRecipe,\r\n                        moreInfoResult: result,\r\n                        recipeid: recipeid,\r\n                        isMoreInfoShown: true\r\n                    }\r\n                }))\r\n                console.log(this.state)\r\n            })\r\n    }\r\n\r\n    saveRecipe = (id) => {\r\n        if (this.state.mealid === this.state.recipeid) {\r\n            const recipeInfo = this.state.moreInfoResult\r\n            this.setState({\r\n                savedRecipes: recipeInfo\r\n            })\r\n        }\r\n        if (typeof(Storage) !== \"undefined\") {\r\n            localStorage.setItem('@calorie-police/userRecipes', JSON.stringify(this.state.savedRecipes));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1></h1>\r\n                <p>Search and add the recipe you want and we will tell you if it fits your daily caloric need</p>\r\n                <DietForm handleChange={this.handleChange} handleSubmit={this.handleSubmit} />\r\n                \r\n                { this.state.isFoodShown && \r\n                <DietResults food={this.state.food}\r\n                seeMoreInfo={this.seeMoreInfo}\r\n                moreInfoRecipe={this.state.moreInfoRecipe} />\r\n                    }           \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DietSearcher\r\n"]},"metadata":{},"sourceType":"module"}